/*!
@weakgroup      test
@{
@file
@author         Luther Lee
@data           2023/10/27
@brief          Test `repeat` statement.
@version
Portable Test and Stimulus Standard Version 2.1 <br>
> Section 21.7 : Procedural constructs <br>
> Section 21.7.6 : repeat (count) statement <br>


---------------------------------------------------------------------------------------------------

### Test Command
@code{.unparsed}
make gentarget
@endcode
*/
component pss_top {

    enum eSTR2NUM {
        ZERO, ONE, TWO
    };

    struct sSTR2NUM {
        string stringVal = "NULL";
        int intVal = 0;
    };

    action root_a {
        int intVal_0 = -1;
        int intVal_1 = -1;
        int intVal_2 = -1;

        exec pre_solve {
            repeat (0) intVal_0 += 1;
            repeat (5) intVal_1 += 1;
            repeat (i : 10) intVal_2 += 1;
        }

        exec body ASM =
"""
// test_repeat_count
intVal_0 = {{intVal_0}}
intVal_1 = {{intVal_1}}
intVal_2 = {{intVal_2}}
""";

        activity {
            repeat (0) do printf with {str == "test0";};
            repeat (5) do printf with {str == "test5";};
            repeat (i : 10) do printf with {str == "testi";};
        }
    }

    action printf {
        rand string str;
        exec body ASM = """{{str}}""";
    }
}

/**@}*/
