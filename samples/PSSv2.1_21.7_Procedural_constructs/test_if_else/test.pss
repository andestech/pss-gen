/*!
@weakgroup      test
@{
@file
@author         Luther Lee
@data           2023/10/27
@brief          Test `if`-`else` statement.
@version
Portable Test and Stimulus Standard Version 2.1 <br>
> Section 21.7 : Procedural constructs <br>
> Section 21.7.9 : if-else statement <br>


---------------------------------------------------------------------------------------------------

### Test Command
@code{.unparsed}
make gentarget
@endcode
*/
component pss_top {

    enum eSTR2NUM {
        ZERO, ONE, TWO
    };

    struct sSTR2NUM {
        string stringVal = "NULL";
        int intVal = 0;
    };

    action root_a {
        int intVal_0 = -1;
        int intVal_1 = 0;

        exec pre_solve {
            if (intVal_0 < 0) intVal_0 = 1;
            if (intVal_1 < 0) intVal_1 = -100; else intVal_1 = 100;
        }

        rand int intVal_0_rand;
        rand int intVal_1_rand;

        constraint {
            if (false) intVal_0_rand in [50]; else intVal_0_rand in [-50];
            if (true) intVal_1_rand in [50]; else intVal_1_rand in [-50];
        }

        exec body ASM =
"""
// test_if_else
intVal_0 = {{intVal_0}}
intVal_1 = {{intVal_1}}

intVal_0_rand = {{intVal_0_rand}}
intVal_1_rand = {{intVal_1_rand}}
""";

        activity {
            if (false) do printf with {msg == "if with false";};
            if (true) do printf with {msg == "if with true";};
            if (false) do printf with {msg == "if-else with false,if";}; else do printf with {msg == "if-else with false,else";};
            if (true) do printf with {msg == "if-else with true,if";}; else do printf with {msg == "if-else with true,else";};
        }
    }

    action printf {
        rand string msg;
        exec body ASM = """{{msg}}""";
    }
}

/**@}*/
